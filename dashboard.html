<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SUBNET MAFIA | Aviator Engine Alpha</title>
    
    <!-- 
      SUBNET MAFIA - AVIATOR PREDICTOR ALPHA
      Repository Ready Version
      Contact: +94716344483
    -->

    <!-- Dependencies -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <style>
        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(200%); }
        }
        body {
            background-color: #020202;
            color: #f1f5f9;
            font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            overflow-x: hidden;
        }
        .custom-scroll::-webkit-scrollbar { width: 4px; }
        .custom-scroll::-webkit-scrollbar-track { background: transparent; }
        .custom-scroll::-webkit-scrollbar-thumb { background: #27272a; border-radius: 10px; }
        .selection-red::selection {
            background: #dc2626;
            color: white;
        }
        .shimmer-bg {
            position: relative;
            overflow: hidden;
        }
        .shimmer-bg::after {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.05), transparent);
            animation: shimmer 2s infinite linear;
        }
    </style>
</head>
<body class="selection-red">
    <div id="root"></div>

    <script type="text/babel" data-type="module">
        const { useState, useEffect, useCallback, useRef } = React;
        
        // --- GITHUB SETUP INSTRUCTIONS ---
        // 1. Create a project at console.firebase.google.com
        // 2. Enable Anonymous Auth or Custom Token Auth
        // 3. Replace the values in the 'githubFallbackConfig' below with your project settings
        
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { 
            getAuth, 
            onAuthStateChanged, 
            signInAnonymously, 
            signInWithCustomToken, 
            signOut 
        } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";

        const githubFallbackConfig = {
            apiKey: "AIzaSyB5w_vWoPeojuP9qFZrfeS62vAS3Cg39go", 
            authDomain: "aviator-predictor-subnet-mafia.firebaseapp.com",
            projectId: "aviator-predictor-subnet-mafia",
            storageBucket: "aviator-predictor-subnet-mafia.firebasestorage.app",
            messagingSenderId: "242699493486",
            appId: "1:242699493486:web:759941ae6e0b38ad89467f",
            measurementId: "G-WK7DYZ8X71"
        };

        const firebaseConfig = typeof __firebase_config !== 'undefined' 
            ? JSON.parse(__firebase_config) 
            : githubFallbackConfig;

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);

        // Optimized Icon Component
        const Icon = ({ name, className = "" }) => {
            const iconRef = useRef(null);
            useEffect(() => {
                if (window.lucide) {
                    window.lucide.createIcons();
                }
            }, [name]);
            return <i data-lucide={name} className={className} ref={iconRef}></i>;
        };

        const App = () => {
            const [user, setUser] = useState(null);
            const [serverSeed, setServerSeed] = useState('d2ff64abc5e35fcd38b5e7487facf7c92893030a4e56a2a9a21e77f03958bcfe');
            const [currentChainSeed, setCurrentChainSeed] = useState('');
            const [results, setResults] = useState([]);
            const [isAnalyzing, setIsAnalyzing] = useState(false);
            const [activeSignal, setActiveSignal] = useState(null);
            const [secondsRemaining, setSecondsRemaining] = useState(0);
            const [error, setError] = useState(null);
            const timerRef = useRef(null);

            useEffect(() => {
                const initAuth = async () => {
                    try {
                        if (typeof __initial_auth_token !== 'undefined' && __initial_auth_token) {
                            await signInWithCustomToken(auth, __initial_auth_token);
                        } else {
                            await signInAnonymously(auth);
                        }
                    } catch (err) {
                        console.error("Auth Error:", err);
                        setError("Secure Connection Failed. Check Firebase API Key.");
                    }
                };

                initAuth();
                const unsubscribe = onAuthStateChanged(auth, (u) => {
                    setUser(u);
                });
                return () => unsubscribe();
            }, []);

            const sha256 = async (message) => {
                const msgBuffer = new TextEncoder().encode(message);
                const hashBuffer = await crypto.subtle.digest('SHA-256', msgBuffer);
                const hashArray = Array.from(new Uint8Array(hashBuffer));
                return hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
            };

            const calculateResult = (hash) => {
                const decimal = parseInt(hash.substring(0, 13), 16);
                const e = Math.pow(2, 52);
                let result = (e / (e - decimal));
                const finalResult = Math.max(1.00, result * 0.99);
                return Math.floor(finalResult * 100) / 100;
            };

            const analyzeSeedChain = useCallback(async () => {
                if (!user) {
                    setError("Security socket initializing...");
                    return;
                }
                setIsAnalyzing(true);
                setError(null);
                
                let seedToScan = currentChainSeed || serverSeed;
                let found = false;
                let chainDepth = 0;
                const MAX_DEPTH = 500;
                
                try {
                    while (!found && chainDepth < MAX_DEPTH) {
                        const currentHash = await sha256(seedToScan);
                        const multiplier = calculateResult(currentHash);
                        
                        if (multiplier >= 5.0) {
                            if (timerRef.current) clearInterval(timerRef.current);
                            const initialSeconds = chainDepth * 15;
                            
                            setActiveSignal({ 
                                multiplier, 
                                depth: chainDepth, 
                                seedSnapshot: seedToScan,
                                hash: currentHash 
                            });
                            setSecondsRemaining(initialSeconds);
                            found = true;
                        } else {
                            seedToScan = currentHash;
                            chainDepth++;
                        }
                    }

                    if (!found) {
                        setError("No 5x+ targets in current 500-round block.");
                    }
                } catch (err) {
                    setError("Engine error: Check seed integrity.");
                } finally {
                    setIsAnalyzing(false);
                }
            }, [currentChainSeed, serverSeed, user]);

            useEffect(() => {
                if (activeSignal && secondsRemaining > 0) {
                    timerRef.current = setInterval(() => {
                        setSecondsRemaining(prev => Math.max(0, prev - 1));
                    }, 1000);
                } else if (secondsRemaining === 0 && activeSignal) {
                    clearInterval(timerRef.current);
                }
                return () => clearInterval(timerRef.current);
            }, [activeSignal, secondsRemaining]);

            const useSignal = async () => {
                if (!activeSignal) return;
                setResults(prev => [{
                    ...activeSignal, 
                    timestamp: new Date().toLocaleTimeString()
                }, ...prev].slice(0, 10));
                
                const nextSeed = await sha256(activeSignal.seedSnapshot);
                setCurrentChainSeed(nextSeed);
                setActiveSignal(null);
                setSecondsRemaining(0);
            };

            const handleLogout = async () => {
                try {
                    await signOut(auth);
                    setUser(null);
                    window.location.href = "index.html";
                } catch (err) {
                    console.error("Logout Error:", err);
                    window.location.href = "index.html";
                }
            };

            if (!user && !error) {
                return (
                    <div className="min-h-screen bg-black flex items-center justify-center p-6">
                        <div className="bg-zinc-900 border border-zinc-800 p-8 rounded-3xl text-center max-w-md w-full shadow-2xl">
                            <div className="mb-6 flex justify-center">
                                <div className="p-4 bg-red-600 rounded-2xl shadow-xl shadow-red-900/40">
                                    <Icon name="lock" className="w-8 h-8 text-white" />
                                </div>
                            </div>
                            <h1 className="text-white text-2xl font-black italic tracking-tighter mb-2 uppercase">Connecting...</h1>
                            <p className="text-zinc-500 text-[10px] mb-6 uppercase tracking-[0.3em]">Bypassing Encryption Protocols</p>
                            <div className="w-full bg-zinc-800 h-1 rounded-full overflow-hidden">
                                <div className="bg-red-600 h-full shimmer-bg w-1/2"></div>
                            </div>
                        </div>
                    </div>
                );
            }

            return (
                <div className="min-h-screen bg-[#020202] text-slate-100 p-4 sm:p-6 md:p-8 selection:bg-red-600 selection:text-white">
                    <div className="max-w-5xl mx-auto space-y-6">
                        
                        {/* Header Section */}
                        <header className="flex flex-col sm:flex-row items-center justify-between border-b border-white/5 pb-6 gap-4">
                            <div className="flex items-center gap-4">
                                <div className="p-3 bg-red-600 rounded-xl shadow-lg shadow-red-900/20">
                                    <Icon name="terminal" className="w-6 h-6 text-white" />
                                </div>
                                <div>
                                    <h1 className="text-2xl sm:text-3xl font-black tracking-tighter uppercase italic">
                                        SUBNET <span className="text-red-600">MAFIA</span>
                                    </h1>
                                    <div className="flex items-center gap-2 mt-1">
                                        <span className="w-1.5 h-1.5 rounded-full bg-green-500 animate-pulse"></span>
                                        <p className="text-slate-500 text-[10px] uppercase font-bold tracking-[0.2em]">
                                            SND: {user?.uid?.substring(0, 12) || 'OFFLINE'}
                                        </p>
                                    </div>
                                </div>
                            </div>
                            
                            <div className="flex items-center gap-4">
                                <div className="hidden md:flex items-center gap-3 px-4 py-2 bg-white/5 rounded-full border border-white/5">
                                    <Icon name="activity" className="w-3 h-3 text-red-500" />
                                    <span className="text-[10px] font-mono text-slate-400 uppercase tracking-widest">Network: STABLE</span>
                                </div>
                                <button 
                                    onClick={handleLogout}
                                    className="flex items-center gap-2 px-4 py-2 bg-zinc-800 hover:bg-zinc-700 rounded-xl text-[10px] font-black uppercase transition-all active:scale-95"
                                >
                                    <Icon name="log-out" className="w-3 h-3" /> Terminate
                                </button>
                            </div>
                        </header>

                        <main className="grid grid-cols-1 lg:grid-cols-12 gap-6">
                            
                            {/* Controls Panel */}
                            <div className="lg:col-span-4 space-y-6">
                                <section className="bg-zinc-900/50 p-6 rounded-[2rem] border border-white/10 shadow-xl backdrop-blur-sm">
                                    <div className="flex items-center justify-between mb-4">
                                        <label className="text-[10px] font-black text-slate-500 uppercase tracking-widest flex items-center gap-2">
                                            <div className="w-1 h-3 bg-red-600"></div> Sequence Input
                                        </label>
                                        <Icon name="shield-check" className="w-4 h-4 text-zinc-600" />
                                    </div>
                                    
                                    <div className="relative group">
                                        <textarea 
                                            className="w-full h-32 bg-black border border-white/10 rounded-2xl p-4 text-[11px] font-mono outline-none focus:border-red-600 focus:ring-1 focus:ring-red-600/50 transition-all resize-none shadow-inner"
                                            value={serverSeed}
                                            onChange={(e) => setServerSeed(e.target.value)}
                                            disabled={!!activeSignal || isAnalyzing}
                                            placeholder="Hash code from game history..."
                                        />
                                        <div className="absolute bottom-3 right-3 opacity-20 group-hover:opacity-100 transition-opacity">
                                           <Icon name="cpu" className="w-4 h-4 text-red-600" />
                                        </div>
                                    </div>

                                    {error && (
                                        <div className="mt-4 p-3 bg-red-900/20 border border-red-500/20 rounded-xl flex items-start gap-3">
                                            <Icon name="alert-circle" className="w-4 h-4 text-red-500 mt-0.5 shrink-0" />
                                            <p className="text-[10px] text-red-400 font-medium">{error}</p>
                                        </div>
                                    )}

                                    <button 
                                        onClick={activeSignal ? useSignal : analyzeSeedChain}
                                        disabled={isAnalyzing}
                                        className={`w-full mt-6 py-4 rounded-2xl font-black uppercase text-xs tracking-[0.2em] transition-all transform active:scale-[0.98] flex items-center justify-center gap-2 ${
                                            isAnalyzing ? 'bg-zinc-800 text-zinc-500 cursor-not-allowed' :
                                            activeSignal ? 'bg-green-600 hover:bg-green-500 text-white shadow-lg shadow-green-900/20' : 
                                            'bg-red-600 hover:bg-red-500 text-white shadow-lg shadow-red-900/20'
                                        }`}
                                    >
                                        {isAnalyzing ? (
                                            <>
                                                <div className="w-4 h-4 border-2 border-white/20 border-t-white rounded-full animate-spin"></div>
                                                Scanning...
                                            </>
                                        ) : activeSignal ? (
                                            <>ACKNOWLEDGE HIT</>
                                        ) : (
                                            <>CALCULATE 5X SIGNAL</>
                                        )}
                                    </button>
                                </section>

                                <div className="grid grid-cols-2 gap-4">
                                    <div className="bg-zinc-900/50 p-4 rounded-2xl border border-white/5">
                                        <p className="text-[8px] font-bold text-slate-500 uppercase tracking-widest mb-1">Gap Offset</p>
                                        <p className="text-xl font-black text-white">{activeSignal ? `+${activeSignal.depth}` : '0'}</p>
                                    </div>
                                    <div className="bg-zinc-900/50 p-4 rounded-2xl border border-white/5">
                                        <p className="text-[8px] font-bold text-slate-500 uppercase tracking-widest mb-1">Probability</p>
                                        <p className="text-xl font-black text-green-500">{activeSignal ? '99.8%' : '0%'}</p>
                                    </div>
                                </div>
                            </div>

                            {/* Signal Display */}
                            <div className="lg:col-span-8">
                                <div className="bg-zinc-900/50 p-6 sm:p-12 rounded-[2.5rem] border border-white/10 flex flex-col items-center justify-center text-center relative overflow-hidden shadow-2xl min-h-[500px] h-full backdrop-blur-sm">
                                    <div className="absolute -top-24 -right-24 w-64 h-64 bg-red-600/10 blur-[120px] rounded-full"></div>
                                    <div className="absolute -bottom-24 -left-24 w-64 h-64 bg-zinc-600/5 blur-[120px] rounded-full"></div>

                                    <div className="relative z-10 w-full space-y-10">
                                        <div className="space-y-4">
                                            <span className="text-slate-500 text-[10px] font-black uppercase tracking-[0.6em] inline-flex items-center gap-2">
                                                <Icon name="zap" className="w-3 h-3 text-red-600" /> Quantum Predictor v2.0
                                            </span>
                                            
                                            <div className="flex flex-col items-center">
                                                <div className="text-8xl sm:text-[10rem] font-black italic leading-none tracking-tighter flex items-end">
                                                    <span className={`${activeSignal ? 'text-white drop-shadow-[0_0_30px_rgba(255,255,255,0.2)]' : 'text-zinc-800'} transition-all duration-700`}>
                                                        {activeSignal ? activeSignal.multiplier.toFixed(2) : "0.00"}
                                                    </span>
                                                    <span className="text-red-600 text-3xl sm:text-5xl mb-4 ml-2 font-black italic">X</span>
                                                </div>
                                            </div>
                                        </div>

                                        <div className="w-full max-w-sm mx-auto bg-black/60 rounded-[2.5rem] p-8 border border-white/5 shadow-inner backdrop-blur-md">
                                            <div className="flex items-center justify-center gap-2 text-red-500 mb-3">
                                                <div className="w-1.5 h-1.5 rounded-full bg-red-600 animate-pulse"></div>
                                                <span className="text-[10px] font-black uppercase tracking-[0.3em]">Estimated ET</span>
                                            </div>
                                            
                                            <div className={`text-7xl sm:text-8xl font-black font-mono tracking-tighter transition-all duration-500 ${secondsRemaining === 0 && activeSignal ? 'text-green-500 drop-shadow-[0_0_15px_rgba(34,197,94,0.3)]' : 'text-white'}`}>
                                                {activeSignal ? String(secondsRemaining).padStart(2, '0') : "00"}
                                                <span className="text-sm font-sans ml-1 text-zinc-600 uppercase">sec</span>
                                            </div>

                                            {activeSignal && secondsRemaining === 0 && (
                                                <div className="mt-6 py-2 px-6 bg-green-500/10 text-green-500 border border-green-500/20 rounded-full text-[10px] font-black uppercase tracking-widest inline-flex items-center gap-2 animate-bounce">
                                                    <Icon name="check-circle-2" className="w-3 h-3" /> Signal Confirmed
                                                </div>
                                            )}
                                        </div>
                                    </div>
                                </div>
                            </div>

                            {/* Data Log Feed */}
                            <div className="lg:col-span-12">
                                <section className="bg-zinc-900/50 rounded-[2rem] border border-white/10 overflow-hidden shadow-xl">
                                    <div className="px-6 py-4 bg-white/5 border-b border-white/5 flex items-center justify-between">
                                        <div className="flex items-center gap-3">
                                            <Icon name="history" className="w-4 h-4 text-slate-500" />
                                            <h3 className="text-[10px] font-black uppercase tracking-widest text-slate-500">Decrypted Hit Log</h3>
                                        </div>
                                        <div className="flex items-center gap-2 px-3 py-1 bg-red-600/10 rounded-full border border-red-600/20">
                                            <span className="w-1.5 h-1.5 rounded-full bg-red-600 animate-pulse"></span>
                                            <span className="text-[8px] font-black text-red-500 uppercase tracking-tighter">Live Monitor</span>
                                        </div>
                                    </div>
                                    
                                    <div className="overflow-x-auto custom-scroll">
                                        <table className="w-full text-left border-collapse min-w-[600px]">
                                            <thead className="bg-black/20 text-zinc-600 text-[9px] font-black uppercase tracking-[0.2em]">
                                                <tr>
                                                    <th className="px-6 py-4">ID</th>
                                                    <th className="px-6 py-4">Value</th>
                                                    <th className="px-6 py-4">Offset</th>
                                                    <th className="px-6 py-4">Signature</th>
                                                    <th className="px-6 py-4 text-right">Logged At</th>
                                                </tr>
                                            </thead>
                                            <tbody className="text-[11px] font-mono">
                                                {results.length > 0 ? results.map((res, i) => (
                                                    <tr key={i} className="border-b border-white/5 hover:bg-white/[0.02] transition-colors group">
                                                        <td className="px-6 py-4 text-slate-500 font-bold">#{results.length - i}</td>
                                                        <td className="px-6 py-4">
                                                            <span className="px-2 py-1 bg-red-600/10 text-red-500 rounded-lg font-black">{res.multiplier.toFixed(2)}x</span>
                                                        </td>
                                                        <td className="px-6 py-4 text-zinc-400">+{res.depth} rounds</td>
                                                        <td className="px-6 py-4 text-[9px] text-zinc-600 group-hover:text-zinc-400 transition-colors">
                                                            {res.hash.substring(0, 24)}...
                                                        </td>
                                                        <td className="px-6 py-4 text-right text-slate-600 uppercase font-sans text-[9px]">{res.timestamp}</td>
                                                    </tr>
                                                )) : (
                                                    <tr>
                                                        <td colSpan="5" className="px-6 py-12 text-center text-zinc-600 uppercase text-[10px] tracking-widest font-bold">
                                                            Waiting for session activity...
                                                        </td>
                                                    </tr>
                                                )}
                                            </tbody>
                                        </table>
                                    </div>
                                </section>
                            </div>
                        </main>

                        <footer className="text-center pt-8 pb-4">
                            <p className="text-[9px] uppercase font-black text-zinc-700 tracking-[0.4em] flex items-center justify-center gap-3">
                                <span className="w-12 h-[1px] bg-zinc-800"></span>
                                SM CYBER DIVISION • GITHUB RELEASE ALPHA • +94716344483
                                <span className="w-12 h-[1px] bg-zinc-800"></span>
                            </p>
                        </footer>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>